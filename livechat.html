<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Support Chat</title>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      /* prevent scrollbars */
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      /* removes inline whitespace */
    }
  </style>
</head>

<body>
  <iframe src="https://direct.lc.chat/13374150/161"></iframe>
  <script>
    LiveChatWidget.on("ready", () => {
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(";").shift();
      }
      function decodeJWTPayload(token) {
        const base64Url = token.split(".")[1];
        const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
        const bytes = Uint8Array.from(atob(base64), c => c.charCodeAt(0));
        return new TextDecoder().decode(bytes);
      }
      console.log("qqqqq");

      LiveChatWidget.call("set_session_variables", {
        token: decodeJWTPayload(getCookie("token")),
      });
    });
  </script>
</body>

</html>